---
// ===== Styles
import "./Button.styles.css";

// ===== Types
import type { ButtonProps } from "./Button.types.ts";

// ===== Scripts
import { getButtonClassList } from "./Button.ts";

// ===== Props
const {
  as: Tag = "button",
  class: className,
  size,
  variant,
  colorPalette,
  type = "button",
  disabled,
  loading,
  loadingText,
  spinner,
  spinnerPlacement = "start",
  ...props
}: ButtonProps = Astro.props;

const classList = getButtonClassList({ size, variant, colorPalette });
---

<Tag class:list={[classList, className]} {type} data-loading={loading} disabled={disabled || loading} {...props}>
  {loading ?
    (<span class="loading-content">
      {spinnerPlacement === "start" && (
        loadingText ?
          (spinner ? spinner : <span>[]</span>) :
          (<span class="spinner-wrapper">
            {spinner ? spinner : <span>[]</span>}
          </span>)
      )}
      {loadingText ?
        loadingText :
        <span class="text-wrapper">
          <slot />
        </span>}
      {spinnerPlacement === "end" && (
        loadingText ?
          (spinner ? spinner : <span>[]</span>) :
          (<span class="spinner-wrapper">{spinner ?
            spinner :
            <span>[]</span>}
          </span>)
      )}
    </span>) :
    <slot />}
</Tag>
